---
layout: post
title: 逆向破解
categories: cracker
description: 通过这段时间的思考，我理清了思路。整理了一个基础的体系
keywords: 逆向，脱壳，暗桩
---
# 逆向破解
#### 一.学前必备
##### 学逆向破解前你需要具备的知识(“0”基础)：
> 1. 学习C语言
> 2. 在C语言的基础之上，学习汇编语言
> 3. 在C语言的基础之上，学习Win32编程
> （没有编程基础，永远都在学软件操作而已）

#### 二.逆向破解 
##### 00.软件保护的发展

&emsp;&emsp;**付费软件**-在你的程序上做了一些小的限制，让你无法使用付费版的某些功能；或是给你一个使用时间的限定，在这个“规定的”时间内，超过这个时间你就不得不花钱去把这个软件请回来。

&emsp;&emsp;**付费软件**之所以能够限定你程序的功能，靠的是授权验证。这个验证可以多种多样，可以是电脑的注册表，也可以是系统时间，还可以是版本号，再或者是网络的一个http请求...
总之，如果你不符合这个条件了，程序就会根据作者的设定，把相应的功能锁死。
#####01.原始程序
&emsp;&emsp;cracker拿到一个程序之后，通过Ollydbg这样的软件来将验证的逻辑修改掉，达到突破授权验证的目的。

**举个栗子：**
> 01:读取名字叫做zhuce.txt的文件
> 02:如果这个文件存在，跳到04
> 03:提示用户输入注册码
> 04:系统检测输入的注册码是否正确
> 05:如果注册码不正确，跳到08
> 06:注册码写入到zhuce.txt文件里面
> 07:注册码验证通过，启用限制功能，本逻辑执行完毕
> 08:注册码校验失败，停用限制功能，本逻辑执行完毕
> cracker们会修改第05行逻辑，改成下面的：
> 05:如果注册码不正确，跳到08
> 或者索性修改成
> 05:这是一行空指令，啥都不干
> 这样整个程序的逻辑就被修改了，也就达到了软件破解的目的。
> 当然，cracker们也可以在04行下断点，从堆栈中前行揪出cpu正在对比的注册码，从而拿到真正的注册码来进行

#####02.加壳
&emsp;&emsp;当开发者知道了知道了这一切的来龙去脉之后，开发者就会想办法去阻止破解的行为，阻止的方法无非就是给破解的过程增加难度和干扰。
#### &emsp;&emsp;于是，壳诞生了。
&emsp;&emsp;壳可以将一个程序给套在里面，可与你非常直观的理解为一个程序的外壳。开发者加的外壳，一般都是一些保护壳。
&emsp;&emsp;到目前为止还没有发现为了防破解尔给自己的软件加单纯的压缩壳的。保护壳的保护机理一般都是**反调试器、反虚拟机、垃圾指令、代码虚拟化**（或者**混淆**）等，程序运行起来是没有什么太大问题的，但是让一个cracker的逆向过程变得异常艰辛。但是加壳有了，相对应的脱壳也会出现。在大牛们的研究下，一个个脱壳机或者脱壳教程就这么出现了。直到现在，加壳和脱壳之间的较量，仍然是那么激烈......
#####03.暗桩
&emsp;&emsp;暗桩代码，一般正常使用情况下是不会触发的。它到底是什么呢？它有可能是一小段子自校验代码，在你修改了她的程序之后，程序发现自己被修改而自动退出。也可能是一小段警告代码，给你来个小的提示框，提示“XXX你个逗13别修改我的程序！”这类的东西。心怀恶意的开发者则是喜欢使用威力更大的东西，比如给你来个蓝屏，格式化你的硬盘，给你加硬盘锁（江民硬盘锁是典型的例子），或是潜伏一段时间，当你的程序使用一段时间后突然清空程序中的全部数据，让你损失惨重。
&emsp;&emsp;暗桩无疑是cracker们最头疼的问题，当然有了暗桩，就有相应的去暗桩手段。cracker为了防止这类代码的破坏，总是喜欢在虚拟机内搞这些东西，即便是不幸中招，也可以利用虚拟机的快照来实现时光倒流。而去除暗桩的手段无非两种：
&emsp;&emsp;* 第一是摸清楚所有的暗桩，尽量不去触发它；
&emsp;&emsp;* 第二是和破解软件一样，硬性修改这些代码；
#####04.云时代
#### &emsp;&emsp;本地验证逐渐的没落，云的时代正在崛起
&emsp;&emsp;有一些软件，本身的代码是不全的，比如软件下载下来就是一个使用版，相应的功能根本没有，当你购买了这个软件之后会给你个完整版的软件。这些可好，除非cracker去入侵开发者的服务器，或者是共享自己的已付费版，否则是没法破解这个软件的。
&emsp;&emsp;同样的道理，有些软件代码也是不全的，但是和上面的方式有点不同--它依赖于网络来工作，一些数据的处理和计算，是在服务器上进行的。比如图片云识别，当你购买了这个服务之后，你就可以在软件上登陆你的账号，然后将一张图片通过这个软件发到服务器上去，服务器验证了你的授权信息有效之后进行识别，并将识别结果返还给你。
&emsp;&emsp;而整个核心的过程没有在你的软件上实现，又谈何破解？
&emsp;&emsp;破解的方法一样，除非cracker去入侵服务器，否则没有办法破解的。
#### &emsp;&emsp;这样破解会走到尽头嘛？？？
####三.学破解，到底学什么？
通过对**软件保护的发展的了解：**
> 1. 可以完成无壳程序的CrackMe。(对无壳程序进行爆破和追码)
> 2. 学习加壳技术，学会脱壳。
> 3. 学习软件保护技术，学会突破保护。
> 4. 学习补丁技术和代码的二次开发。
> 5. 通过学习，设计好的方法来保护程序。


之后的教程，日后更新...


